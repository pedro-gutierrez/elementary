kind: module
name: hello
spec:
  init:
    foo: foo
  decoders:
    default:
      get:
        method: GET
        headers:
          content-type:
            any: text
      post:
        dict:
          method: POST
          headers:
            any: dict
          body:
            any: text
      post2:
        dict:
          method: POST
          headers:
            any: dict
          body:
            any: dict
    store:
      not_found:
        dict:
          rows:
            empty: list
  update:
    post:
      model:
        items:
          - key: body
      cmds:
        response: hello
    post2:
      model:
        items:
          - key: body
      cmds:
        response: hello2
    get:
      model:
        kind:
          a:
            b:
              c: @headers.content-type
        plap: plop
        items:
          - item1
          - item2
          - 1
          - true
        num: 1
        is_valid: true
      cmds:
        response: hello
  encoders:
    hello:
      status: 201
      headers:
        content-type: application/json
      body:
        msg: it works yeah
        items: @items
        kind: @kind.a.b.c
    hello2:
      status: 201
      headers:
        content-type: application/json
      body:
        msg: it works yeah
        items:
          key: items
