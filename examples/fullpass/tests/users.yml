kind: test
name: users
spec:
  steps:
    - title: Given user Alice
      steps:
        - Given details for Alice
        - When I register
        - Then I should have a 201
    - title: Given details for Alice
      user:
        object:
          id: e48329e3
          first: Alice
          last: Cooper
          email: alice@mail.com
    - title: Given details for Bob
      user:
        object:
          id: e48329e4
          first: Bob
          last: Marley
          email: bob@mail.com
    - title: When I register
      http:
        method: post
        url:
          - @baseUrl
          - /api/users
        headers:
          content-type: application/json
          client-id: mobile
          client-secret: @clients.mobile
        body: @user
      as: latest
