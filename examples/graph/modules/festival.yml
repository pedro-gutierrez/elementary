kind: module
name: festival
spec:
  decoders:
    fullpass:
      create_festival:
        event: create
        kind: festival
        id:
          any: text
        data:
          name:
            any: text
      festival_created:
        event: created
        kind: festival
        id:
          any: text
        data:
          name:
            any: text
  update:
    create_festival:
      model:
        id: @id
        name: @data.name
      cmds:
        store: festival_created
    festival_created:
      model:
        id: @id
        name: @data.name
  encoders:
    festival_created:
      kind: festival
      event: created
      id: @id
      data:
        name: @name
      in: fullpass
