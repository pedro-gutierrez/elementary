kind: test
name: assignments
spec:
  steps:
    - title: Given that package is assigned to that project
      steps:
        - When I assign that package to that project
        - Then I should have a 201
    - title: Given that user is assigned to that project
      steps:
        - When I assign that user to that project
        - Then I should have a 201
    - title: When I assign that package to that project
      http:
        method: post
        url:
          - @baseUrl
          - /api/projects/
          - @project.id
          - /packages
        headers:
          merge:
            - @auth
            - @json
        body:
          package: @package.id
      as: latest
    - title: When I assign that user to that project
      http:
        method: post
        url:
          - @baseUrl
          - /api/projects/
          - @project.id
          - /users
        headers:
          merge:
            - @json
            - @auth
        body:
          user: @user.id
      as: latest
