kind: module
name: projects
spec:
  decoders:
    http:
      create:
        method: POST
        body:
          id:
            any: text
          name:
            any: text
          customer:
            any: text
      get:
        method: GET
    store:
      projects:
        projects:
          any: list
  update:
    create:
      model:
        project: @data.body
      cmds:
        store: create
    get:
      cmds:
        store: list
    projects:
      model:
        data: @data.projects
      cmds:
        return: data
  encoders:
    create:
      store: @store
      insert:
        merge:
          - @project
          - created:
              now: {}
      into: projects
    list:
      store: @store
      find_all: {}
      from: projects
      as: projects

