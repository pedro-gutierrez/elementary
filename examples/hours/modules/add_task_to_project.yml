kind: module
name: add_task_to_project
spec:
  decoders:
    http:
      create:
        body:
          id:
            any: text
          description:
            any: text
          day:
            any: text
          month:
            any: text
          year:
            any: text
          time:
            any: number
    store:
      not_found:
        package: not_found
      package:
        package:
          any: object
  update:
    create:
      model:
        data: @data.body
      cmds:
        store: create
  encoders:
    create:
      store: @store
      insert:
        merge:
          - @data
          - owner: @user.id
            created:
              now: {}
          - project: @project.id
      into: tasks
