kind: module
name: add_project_to_organization
spec:
  decoders:
    http:
      create:
        body:
          id:
            any: text
          name:
            any: text
  update:
    create:
      model:
        project: @data.body
      cmds:
        store: create
  encoders:
    create:
      store: @store
      insert:
        id: @project.id
        name: @project.name
        created:
          now: {}
        organization: @organization.id
        owner: @user.id
      into: projects
