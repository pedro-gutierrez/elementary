kind: module
name: ui_hello
spec:
  init:
    cmds:
      ui: downloading-view
  decoders: {}
  update: {}
  encoders:
    downloading-view:
      view: loading-view
      params:
        title: @title
        subtitle: Downloading scenarios
    indexing-view:
      view: loading-view
      params:
        title: @title
        subtitle: Indexing
    loading-view:
      tag: section
      attrs:
        class: section is-large
        style:
          text-align: center
      children:
        - view: large-app-icon-view
        - view: app-title-view
        - tag: h6
          attrs:
            class: subtitle is-6
          children:
            - @subtitle
    layout-view:
      tag: div
      children:
        - view: nav-view
        - view: breadcrumbs-view
        - view: container-view
          params:
            content-view: @view
            content: @
        - view: footer-view
    app-title-view:
      tag: h4
      attrs:
        class: title is-4 is-capitalized
      children:
        - @title
    app-icon-view:
      tag: span
      attrs:
        class:
          format: "icon is-{{ icon-size }}"
      children:
        - tag: i
          attrs:
            class: fas fa-cubes
            style:
              font-size:
                format: "{{ font-size }}em"
    large-app-icon-view:
      view: app-icon-view
      params:
        icon-size: large
        font-size: 2.5
    small-app-icon-view:
      view: app-icon-view
      params:
        icon-size: medium
        font-size: 1.5
    footer-view:
      tag: footer
      attrs:
        class: footer
      children:
        - tag: section
          attrs:
            class: section content has-text-centered
          children:
            - tag: p
              children:
                - view: small-app-icon-view
                - view: app-title-view
                - view: credits-view
    credits-view:
      tag: p
      attrs:
        class: subtitle is-size-7
      children:
        - "Made with "
        - tag: a
          attrs:
            href: https://elixir-lang.org
          children:
            - Elixir
        - " + "
        - tag: a
          attrs:
            href: https://github.com/pedro-gutierrez/elementary
          children:
            - Elementary
    nav-view:
      tag: nav
      attrs:
        class: navbar
      children:
        - tag: div
          attrs:
            class: navbar-brand
          children:
            - tag: div
              attrs:
                class: navbar-item
              children:
                - tag: h4
                  attrs:
                    class: title is-4
                  children:
                    - tag: span
                      attrs:
                        class: icon is-large
                      children:
                        - tag: i
                          attrs:
                            class: fas fa-cubes
                            style:
                              font-size: 1.5em
                    - tag: span
                      attrs:
                        class: is-capitalized
                      children:
                        - @title
        - tag: div
          attrs:
            class: navbar-menu
          children:
            - tag: div
              attrs:
                class: navbar-start
            - tag: div
              attrs:
                class: navbar-end
              children:
                - tag: div
                  attrs:
                    class: navbar-item
                  children:
                    - view: search-view
                - tag: div
                  attrs:
                    key: toggle-view
                    class: navbar-item
                  children:
                    - tag: div
                      attrs:
                        class: buttons
                      children:
                        - view: mode-button
                          params:
                            mode: scenarios
                            selected-mode: @mode
                        - view: mode-button
                          params:
                            mode: steps
                            selected-mode: @mode
    mode-button:
      tag: a
      attrs:
        onclick:
          mode: @mode
        class:
          either:
            - when:
                equal:
                  - @mode
                  - @selected-mode
              then: button is-light is-primary is-outlined
            - button is-light is-outlined
      children:
        - @mode

    search-view:
      tag: div
      attrs:
        class: field
      children:
        - tag: div
          attrs:
            class: control has-icons-right
          children:
            - tag: input
              attrs:
                oninput: query
                class: input
                type: text
                placeholder: Search
                value: @query
            - view: clear-icon-view
              when:
                is_set: @query
    clear-icon-view:
      tag: span
      attrs:
        class: icon is-small is-right
      children:
        - tag: i
          attrs:
            class: fa fa-times-circle
            style:
              cursor: pointer
              pointer-events: initial
            onclick: clear-search
    title-view:
      view: hero-view
      params:
        title: @title
        subtitle: Examples
    container-view:
      tag: div
      attrs:
        class: container
      children:
        - view: @content-view
          params: @content
    hero-view:
      tag: section
      attrs:
        class: hero
      children:
        - tag: div
          attrs:
            class: hero-body
          children:
            - tag: div
              attrs:
                class: container
              children:
                - tag: h1
                  attrs:
                    class: title
                  children:
                    - @title
                - tag: h2
                  attrs:
                    class: subtitle
                  children:
                    - @subtitle
