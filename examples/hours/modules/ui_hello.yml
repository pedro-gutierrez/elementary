kind: module
name: ui_hello
spec:
  init:
    cmds:
      ui: layout-view
  decoders: {}
  update: {}
  encoders:
    layout-view:
      tag: div
      children:
        - view: nav-view
        - view: breadcrumbs-view
        - view: container-view
          params:
            content-view: @view
            content: @
    nav-view:
      tag: nav
      attrs:
        class: navbar is-spaced
        role: navigation
        aria-label: main navigation
      children:
        - tag: div
          attrs:
            class: container
          children:
            - tag: div
              attrs:
                class: navbar-brand
              children:
                - tag: div
                  attrs:
                    class: navbar-item
                  children:
                    - tag: h4
                      attrs:
                        class: title is-4
                      children:
                        - tag: span
                          attrs:
                            class: icon is-large
                          children:
                            - tag: i
                              attrs:
                                class: fas fa-cubes
                                style:
                                  font-size: 1.3em
                        - @title
            - tag: div
              attrs:
                class: navbar-menu
              children:
                - tag: div
                  attrs:
                    class: navbar-start
                - tag: div
                  attrs:
                    class: navbar-end
                  children:
                    - tag: div
                      attrs:
                        class: navbar-item
                      children:
                        - view: search-view
                    - tag: div
                      attrs:
                        key: toggle-view
                        class: navbar-item
                      children:
                        - tag: div
                          attrs:
                            class: buttons
                          children:
                            - view: mode-button
                              params:
                                mode: scenarios
                                selected-mode: @mode
                            - view: mode-button
                              params:
                                mode: steps
                                selected-mode: @mode
    mode-button:
      tag: a
      attrs:
        onclick:
          mode: @mode
        class:
          either:
            - when:
                equal:
                  - @mode
                  - @selected-mode
              then: button is-light is-primary
            - button is-light
      children:
        - @mode

    search-view:
      tag: div
      attrs:
        class: field
      children:
        - tag: div
          attrs:
            class: control has-icons-right
          children:
            - tag: input
              attrs:
                oninput: query
                class: input
                type: text
                placeholder: Search
                value: @query
            - view: clear-icon-view
              when:
                is_set: @query
    clear-icon-view:
      tag: span
      attrs:
        class: icon is-small is-right
      children:
        - tag: i
          attrs:
            class: fa fa-times-circle
            style:
              cursor: pointer
              pointer-events: initial
            onclick: clear-search
    title-view:
      view: hero-view
      params:
        title: @title
        subtitle: Examples
    container-view:
      tag: div
      attrs:
        class: container
      children:
        - view: @content-view
          params: @content
    hero-view:
      tag: section
      attrs:
        class: hero
      children:
        - tag: div
          attrs:
            class: hero-body
          children:
            - tag: div
              attrs:
                class: container
              children:
                - tag: h1
                  attrs:
                    class: title
                  children:
                    - @title
                - tag: h2
                  attrs:
                    class: subtitle
                  children:
                    - @subtitle
