kind: module
name: common_project
spec:
  encoders:
    find_project_members:
      store: @store
      find:
        project: @project.id
      from: memberships
      as: project_members
    is_project_member:
      one_of:
        - equal:
            - @model.organization.owner
            - @model.user.id
        - match: @model.user_memberships
          with:
            list:
              with:
                project: @model.project.id
                user: @model.user.id
