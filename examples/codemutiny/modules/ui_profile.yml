kind: module
name: ui_profile
spec:
  decoders:
    http:
      unauthorized:
        status: 401
      profile:
        body:
          email:
            any: text
          id:
            any: text
          name:
            any: text
          picture:
            any: text
    events:
      member-home-page-loading:
        member-home-page:
          any: object
  update:
    member-home-page-loading:
      cmds:
        http: get-profile
    unauthorized:
      model:
        session: ""
        view: unauthorized-view
      cmds:
        ui: {}
    profile:
      model:
        profile: "@data.body"
      cmds:
        events: profile-ready
  encoders:
    member-nav: []
    get-profile:
      method: get
      path: /api/profile
      headers:
        authorization: "@session"
    profile-ready:
      profile: "@profile"