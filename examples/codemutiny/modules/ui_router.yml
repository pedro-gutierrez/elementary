kind: module
name: ui_router
spec:
  decoders:
    ui:
      navigate:
        navigate:
          route:
            any: text
          query:
            any: object
    router:
      home-page:
        route:
          one_of:
            - /
            - /home
        query:
          without:
            - session
      error-page:
        route: /error
  update:
    navigate:
      model:
        route: "@data.navigate"
      cmds:
        router: navigate 
    home-page:
      model:
        view: home-view
      cmds:
        http: get-products
        ui: public-layout-view
    error-page:
      model:
        view: error-view
      cmds:
        ui: public-layout-view
  encoders:
    navigate:
      action: navigate 
      target: "@route"
    encode-route:
      route: "@route"
      query:
        maybe_with:
          - session
