kind: module
name: error_alerts
spec:
  decoders:
    caller:
      alert:
        any: object
  update:
    alert:
      model:
        alert: "@data"
      cmds:
        slack: alert
  encoders:
    alert:
      object:
        channel: errors
        text:
          format: "App *{{ app }}* returned an error"
          params: "@alert"
        data: "@alert"

