kind: module
name: ui_home
spec:
  init:
    model:
      view: home-view
    cmds:
      router: {}
  decoders:
    ui:
      switch-display-mode:
        switch-display-mode: ""
  update:
    switch-display-mode:
      model:
        displayMode:
          switch: "@model.displayMode"
          case:
            light: dark
          default: light
      cmds:
        ui: {}
  encoders:
    layout-view:
      tag: div
      attrs:
        class:
          format: "{{ bg-color }} {{ fg-color }}"
          params:
            encoder: theme-colors
      children:
        - view: header-view
          params:
            view: "@view"
            displayMode: "@displayMode"
            nav:
              - route: home
              - route: login
              - content-view: display-mode-switcher-view
                route: plop
        - view: "@view"
        - view: footer-view
    footer-view:
      tag: footer
      attrs:
        class:
          format: "{{ fg-color }} {{ bg-color }} body-font"
          params:
            encoder: theme-colors
      children:
        - tag: div
          attrs:
            class:
              format: "{{ bg-color-active }}"
              params:
                encoder: theme-colors
          children:
            - tag: div
              attrs:
                class: container mx-auto py-4 px-5 flex flex-wrap flex-col sm:flex-row
              children:
                - tag: p
                  attrs:
                    class: text-gray-500 text-sm text-center sm:text-left
                  children:
                    - view: icon-view
                      params:
                        icon: fa fa-skull-crossbones
                        margin: mx-1
                        title: "Skull"
                    - "© 2020 Codemutiny"
    theme-colors:
      switch: "@displayMode"
      case:
        dark:
          fg-color: text-gray-500
          fg-color-active: text-white
          fg-hover: text-white
          bg-color: bg-gray-900
          bg-color-active: bg-gray-800
          bg-color-active-hover: bg-gray-700
        light:
          fg-color: text-gray-700
          fg-color-active: text-gray-900
          fg-hover: text-gray-900
          bg-color-active: bg-gray-200
          bg-color-active-hover: bg-gray-300
    header-view:
      tag: header
      attrs:
        #class: text-gray-700 body-font
        class:
          format: "{{ fg-color }} {{ bg-color }} body-font"
          params:
            encoder: theme-colors
      children:
        - tag: div
          attrs:
            class: container mx-auto flex flex-wrap p-5 flex-col md:flex-row items-center
          children:
            - tag: a
              attrs:
                class:
                  format: "flex title-font font-medium items-center mb-4 md:mb-0 {{ fg-color }}"
                  params:
                    encoder: theme-colors
              children:
                - view: icon-view
                  params:
                    size: text-xl
                    icon: fa fa-skull-crossbones
                - tag: span
                  attrs:
                    class: ml-3 text-xl
                  children:
                    - Codemutiny
            - tag: nav
              attrs:
                class: md:ml-auto flex flex-wrap items-center text-base justify-center
              children:
                loop: "@nav"
                with: header-nav-item-view
    header-nav-item-view:
      view:
        maybe: "@content-view"
        otherwise: header-link-view
    header-link-view:
      tag: a
      attrs:
        href: "#"
        class:
          format: "mr-5 hover:{{ fg-hover }} {{ extra }} {{ bg-color-active }} hover:{{ bg-color-active-hover }}"
          params:
            merge:
              - encoder: theme-colors
              - choose: "@view"
                when:
                  format: "{{ route }}-view"
                then:
                  fg-hover: none
                  extra: "border-0 py-1 px-3 focus:outline-none rounded text-base"
                otherwise:
                  extra: ""
                  bg-color-active: none
                  bg-color-active-hover: none
        onclick:
          navigate:
            encoder: encode-route
      children:
        - capitalize: "@route"
    display-mode-switcher-view:
      tag: a
      attrs:
        href: 
          format: "/?mode={{ mode }}"
          params:
            mode:
              switch: "@displayMode"
              case:
                dark: light
              default: dark
      children:
        - view: icon-view
          params:
            icon:
              switch: "@displayMode"
              case:
                dark: fas fa-sun
              default: fas fa-moon
    home-view:
      tag: div
      attrs:
        class: container mx-auto flex flex-col px-5 py-24 justify-center items-center
      children:
        - view: hero-view
        - view: products-view
          params:
            displayMode: "@displayMode"
            products:
              - title: "Full Pass"
                description: "Don't look, simply find your last minute pass to your next favourite social event"
                icon: fas fa-ticket-alt
              - title: "Cloud"
                description: "Relax, and let us run your APIs, rock solid, on the BEAM"
                icon: fas fa-cloud
              - title: "Consulting"
                description: "Have a new software project in mind, not sure where to start? Surely we can help"
                icon: fas fa-hands-helping
    member-layout-view:
      tag: div
      children:
        - view: member-nav-view
        - tag: section
          attrs:
            class: section container
          children:
            - view: "@view"
        - view: footer-view
    citation-view:
      tag: section
      attrs:
        class: body-font
      children:
        - tag: div
          attrs:
            class: container px-5 mx-auto
          children:
            - tag: div
              attrs:
                class: xl:w-1/2 lg:w-3/4 w-full mx-auto text-center
              children:
                - tag: p
                  attrs:
                    class: leading-relaxed text-4xl
                  children:
                    - view: icon-view
                      params:
                        title: quote
                        icon: fas fa-quote-right

                - tag: p
                  attrs:
                    class: leading-relaxed text-lg
                  children:
                    - "@quote"
                - tag: span
                  attrs:
                    class: inline-block h-1 w-10 rounded bg-indigo-500 mt-8 mb-6
                  children: []
                - tag: h2
                  attrs:
                    class: text-gray-900 font-medium title-font tracking-wider text-sm
                  children:
                    - "@author"
                      ##hero-e-view:
                      ##  tag: div
                      ##  attrs:
                      ##    class: w-full md:w-2/3 flex flex-col mb-16 items-center text-center
                      ##  children:
                      ##    - tag: h1
                      ##      attrs:
                      ##        class: title-font text-5xl mb-4 font-medium text-gray-400 tracking-widest uppercase
                      ##      children:
                      ##        - view: icon-view
                      ##          params:
                      ##            margin: mx-4
                      ##            size: text-5xl fa-3x
                      ##            icon: fas fa-skull-crossbones
    hero-view:
      tag: section
      attrs:
        class: text-gray-700 body-font
      children:
        - tag: div
          attrs:
            class: container mx-auto flex mb-10 px-5 items-center justify-center flex-col
          children:
            - view: icon-view
              params:
                margin: mx-4
                size: fa-10x
                icon: fas fa-skull-crossbones
        - tag: div
          attrs:
            class:
              format: "text-center w-full {{ fg-color }}"
              params:
                encoder: theme-colors
          children:
            - tag: h1
              attrs:
                class: title-font text-5xl mb-4 font-medium
              children:
                - Software that survives storms. Technology too.
            - view: citation-view
              params:
                quote: |
                  Tho others, who give an Account of their Voyages, do generally attempt
                  to imitate the style and method which is us’d by Authors that write ashore,
                  I rather choose to keep to the Language of the Sea, which is more genuine, and natural.
                author: "Woodes Rogers"

    title-view:
      tag: div
      attrs:
        class: w-full md:w-2/3 flex flex-col mb-16 items-center text-center
      children:
        - tag: h1
          attrs:
            class: title-font sm:text-4xl text-3xl mb-4 font-medium text-gray-900
          children:
            - "@title"
    subtitle-view:
      tag: h2
      attrs:
        class: content
      children:
        - view: "@content-view"
    icon-view:
      tag: i
      attrs:
        title:
          maybe: "@title"
        class:
          format: "{{ icon }} {{ margin }} {{ color }} {{ size }}"
    link-view:
      tag: a
      attrs:
        href: "@url"
      children:
        - "@title"
    tag-view:
      tag: span
      attrs:
        class:
          format: "tag is-light {{ style }}"
      children:
        - "@title"
    products-view:
      tag: div
      attrs:
        class: container py-24 px-5 mx-auto
      children:
        - tag: div
          attrs:
            class: flex flex-col md:flex-row sm:-m-4 -mx-4 -mb-10 -mt-4
          children:
            loop: "@products"
            with: product-view
            params:
              displayMode: "@displayMode"
    product-view:
      tag: div
      attrs:
        class: p-4 md:w-1/3 md:mb-0 mb-6 flex flex-col text-center items-center
      children:
        - tag: div
          attrs:
            class:
              format: "w-20 h-20 inline-flex items-center justify-center rounded-full {{ bg-color-active }} text-indigo-500 mb-5 flex-shrink-0"
              params:
                encoder: theme-colors
          children:
            - view: icon-view
              params:
                size: text-3xl
                icon: "@icon"
        - tag: div
          attrs:
            class: flex-grow
          children:
            - tag: h2
              attrs:
                class:
                  format: "{{ fg-color-active }} text-lg title-font font-medium mb-3"
                  params:
                    encoder: theme-colors
              children:
                - "@title"
            - tag: p
              attrs:
                class: leading-relaxed text-base
              children:
                - "@description"
            - tag: a
              attrs:
                class: mt-3 text-indigo-500 inline-flex items-center
              children:
                - Learn More
