kind: module
name: fullpass_create_event 
spec:
  decoders:
    http:
      create:
        method: POST
        body:
          id:
            any: text
    store:
      created: created
  update:
    create:
      model:
        event:
          id:
            uuid: {}
          ref: "@data.body.id"
          source: fb
          status: pending
          identity: "@model.session.identity"
          timestamp:
            now: {}
      cmds:
        store: create
    created:
      cmds:
        return: accepted
  encoders:
    create:
      store: "@store"
      insert: "@event"
      into: fullpass